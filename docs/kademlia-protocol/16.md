# 十六、未落实的事情

规范中有几个项目在这里没有实现。

## UDP 辍学

从规格来看:

”*一个相关的问题是，由于 Kademlia 使用 UDP，当网络数据包被丢弃时，有效的联系人有时会无法响应。因为数据包丢失通常表示网络拥塞，所以 Kademlia 会锁定无响应的联系人，并避免在指数级增长的回退间隔内向他们发送任何进一步的 RPC。因为在大多数阶段，Kademlia 的查找只需要听到 k 个节点中的一个，所以系统通常不会将丢弃的 RPC 重新传输到同一个节点。*

*当一个联系人连续 5 个 RPC 都没有响应时，就被认为是失效的。如果 fe-bucket 未满或其替换缓存为空，Kademlia 只会标记过时的联系人，而不会删除他们。这确保了，除其他外，如果一个节点自己的网络连接暂时中断，该节点不会完全清空其所有的 k 桶。*”

这不仅适用于 UDP 数据包，也适用于任何连接——它可能会中断一段时间。该算法与延迟驱逐有些纠缠。在延迟驱逐中，规范状态“任何没有响应的都可以被驱逐。”正是规范对 UDP 丢弃的描述实际上定义了“无响应”的实际含义。

## 加速查找

同样，从规格来看:

"*当一个联系人连续 5 个 RPC 都没有响应时，就被认为是过期的。如果 fe-bucket 未满或其替换缓存为空，Kademlia 只会标记过时的联系人，而不会删除他们。这确保了，除其他外，如果一个节点自己的网络连接暂时中断，该节点不会完全清空其所有的 k 桶。*

*实现中的另一个优化是通过增加路由表大小来实现每次查找更少的跳数。从概念上来说，这是通过一次考虑 IDs b 位来完成的，而不是一次只考虑一位。如前所述，每次查找的预期跳数是 log2n。通过将路由表的大小增加到预期的 2 <sup>b</sup> 日志<sub>2</sub>T5】bn 个 k 桶，我们可以减少日志<sub>2</sub>T9】bn .*的预期跳数。”

在这个实现中，我们有桶范围，而不是密钥空间中每个前缀位一个桶；因此，加速查找优化无关紧要，因为桶范围通常跨越许多前缀位。

## 西比尔发作

对等网络容易受到西比尔攻击:

“在 Sybil 攻击中，攻击者通过创建大量假名身份来颠覆对等网络的声誉系统，利用这些身份获得不成比例的巨大影响力。信誉系统对 Sybil 攻击的脆弱性取决于身份生成的成本、信誉系统接受来自没有信任链的实体的输入的程度，以及信誉系统是否同等对待所有实体。”[<sup>【18】</sup>](The_Kademlia_Protocol_Succinctly_0020.htm#_ftn18)

在当前的实现中，如果对等网络已经填充良好(大多数 k 桶已满)，则 Sybil 攻击不会替换“好的”已知对等网络—攻击只会将尝试放入 DHT 的挂起联系缓冲区。在一个基本上无人居住的网络中(大多数 k 桶有空间容纳更多的对等体)，后续无法从对等体获得响应将导致其最终被驱逐。捎带 ping 方法也是 RPC 调用的接收方验证发送方的一种方法。