# 第二章微软网络堆栈简史

ASP.NET 核心与之前的任何东西都大不相同。为了理解原因。NET Core 的出现，很重要的一点是看看它以前是什么，以及在过去的 15 年里，网络开发世界发生了怎样的变化。

## ASP.NET 网页表单

网络表单是随着的第一个版本发布的。NET 框架早在 2002 年。这是为了吸引两种不同类型的开发者。

第一组包括来自*经典 ASP* 的网络开发人员，也称为活动服务器页面，他们已经在使用静态 HTML 和动态服务器端脚本(通常是 VBScript)的混合构建网站和网络应用程序，框架使用这些脚本来隐藏与底层 HTTP 连接和网络服务器交互的复杂性。该框架还提供了其他服务来实现某种状态管理、缓存和其他低级关注点。

第二组由大量的 *WinForms* 应用程序开发人员组成，他们被市场的变化迫使开始接近 web 开发的世界。那些开发人员不知道如何编写 HTML。他们习惯于通过将元素拖到集成开发环境的设计器表面来开发应用程序的用户界面。

网络表单是通过结合两种技术的元素而设计的。它变成了一个框架，在这个框架中，一切都被抽象化了:HTTP 连接的元素(请求和响应)，UI 元素的 HTML 标记，以及 web 的无状态特性——最后一个是通过臭名昭著的*视图状态*。

这种组合非常成功，因为它允许许多新开发人员构建网络应用程序，这要归功于功能丰富且平易近人的基于事件的编程模型。

这些年来，很多事情都变了。这些新开发人员变得更加熟练，并且希望对生成的 HTML 标记有更多的控制。随着 JavaScript 库、Ajax 的广泛使用以及移动设备的引入，web 编程模式也发生了变化。但是网络表单很难发展:

*   这是一个巨大的整体框架，与主抽象层*系统紧密耦合。网页*。
*   考虑到其依赖于 Visual Studio 的编程模型，Web Forms 的发布周期与其 IDE 和整个框架相关联，因此更新之间要经过数年的时间。
*   最后一个限制因素是，网络表单与互联网信息服务(IIS)相结合，这更难升级，因为它是操作系统本身的一部分。

## ASP.NET MVC

为了尝试解决上述问题，微软在 2009 年发布了一个名为 ASP.NET MVC 的新网络框架。它基于模型-视图-控制器(MVC)模式，以保持业务逻辑和表示逻辑之间的清晰分离，允许对 HTML 标记的完全控制。除此之外，它还作为一个单独的库发布，这个库不包含在框架中。由于这种发布模式，并且不 100%依赖集成开发环境来设计用户界面，可以轻松更新它，使其更符合快节奏的网络开发世界。

但是 ASP.NET MVC，虽然解决了发布周期慢的问题，去掉了 HTML 标记抽象，仍然受到了依赖。NET 框架和系统。Web，这仍然使它与 IIS 和 Windows 严格耦合。

## ASP.NET Web API

随着时间的推移，一种新的网络编程模型出现了:这种新的范例后来被称为单页应用程序(SPA)，它主要使用静态网页，通过 Ajax 从服务器获取数据，并通过 JavaScript 在客户端直接呈现用户界面，而不是在服务器端处理数据并将完全呈现的页面发送到浏览器。微软需要实现一个更轻的、能感知网络的远程通信库，即视窗通信基金会(WCF)，因此他们发布了 ASP.NET 网络应用编程接口。

这个库甚至比其他库更模块化，可能是因为它最初是由 WCF 团队而不是 ASP.NET 团队开发的，所以它不依赖于 System。Web 和 IIS。这使得网络应用编程接口完全独立于 ASP.NET 和 IIS 的其余部分，打开了在自定义主机或不同的网络服务器下运行它的可能性。

## OWIN 和武士刀

现在，随着所有这些模块化框架的传播，存在着开发人员必须为现代应用程序的不同方面管理单独主机的具体风险。为了避免这成为一个真正的问题，来自。NET 社区创建了一个新的标准，叫做 *OWIN* ，代表开放网络接口。NET，它定义了现代 web 应用程序的组件以及这些组件如何交互。

微软发布了一款符合 OWIN 标准的网络服务器，名为 *Katana* ，并确保其网络框架在其中工作。然而，一些问题仍然存在。

ASP.NET 最有价值球员，与系统捆绑在一起。网络，无法在卡塔纳内运行。此外，所有这些由不同团队在不同时间开发的框架都有不同的编程模型。例如，ASP.NET MVC 和 Web API 都支持依赖注入，但是方式不同。如果开发人员想在同一个应用程序中结合 MVC 和 Web API，他们必须实现两次。

## 它带来了什么。净核心

随着库的最新迭代，很明显最大的潜力得到了充分的发挥。NET 框架已经达成。然而，许多问题仍然悬而未决:

*   一个跑不了。NET 应用程序。
*   对整个框架的依赖使得。NET 应用程序不太适合高密度场景，比如云，在云上，数百个应用程序在一台机器上运行，并且必须快速扩展。
*   的复杂性。NET 项目系统阻止了。NET 应用程序。

很明显，唯一可能的解决方案是从头开始，重新设计 ASP.NET 框架，使其完全模块化，具有明确实施的通用基础。它还需要跨平台并基于底层。NET 框架遵循相同的原则。

基于这些原因，微软基于新的跨平台彻底重建了 ASP.NET 核心。NET 运行时，后来成为。NET 核心。