定制了集成开发环境后，我们现在可以运行我们编写的程序了。但是无论你是带着 Visual Studio 的经验来的，还是完全没有经验，Rider 都有新的特性和机制，你必须学习。

我们将讨论关键主题:如何编辑和运行代码，调试器如何工作，以及对 NuGet 和单元测试的支持。

如果您在安装了 Visual Studio 的系统上运行 Rider，则可以跳过这一部分。如果您不是，以下是您需要安装的一套工具，以便让 Rider 真正构建任何东西:

*   微软构建工具(只需获取最新版本)。
*   。NET 框架(除非已经安装了构建工具)。
*   (可选)。NET Core，如果你计划构建这些类型的应用程序。
*   (可选)IIS Express(为您的语言选择 X86 发行版)。
*   (可选)如果打算做 F#开发，添加 **FSharp。编译器.工具 NuGet** 包到你的项目。您可能还需要更改`TargetFrameworkVersion`项目设置。

安装这些工具后，您现在可以编译和运行了。NET 应用程序。

制作一个计算机程序的全部要点是写一些源代码，这些源代码被编译成二进制文件。有两种主要的输出形式:一个*可执行文件*和一个*库*。可执行文件是一个你可以直接运行的程序；库是可由另一个可执行文件或库使用的二进制文件。

骑手/Visual Studio 术语中的*项目*是编译成单个二进制文件的文件集合。但是由于大型系统是由多个项目组成的，这些项目通常被归入*解决方案*中。解决方案只是可能相关也可能不相关的项目的集合。有时候你只想把相关的项目集中在一个屋檐下；在其他时候，您有一个可执行文件和该可执行文件使用的一堆库。无论哪种情况，解决方案都是你想要的。

如果您查看“开始”屏幕的右侧，您会看到一些如何开始使用实际代码的选项:

![](../Images/image031.jpg)

图 28

所以右边的大选项是:

*   **新方案**用单个项目做出新方案。有许多项目模板，我们马上就会看到。
*   **打开解决方案或项目**打开解决方案文件或项目文件。如果打开一个项目文件，可以自动创建该项目的解决方案文件。请记住，即使您可以在 MSBuild 中单独编译项目，Rider 也会选择专门处理解决方案。
*   **打开文件或文件夹**允许您在项目或解决方案文件不可用时打开单个文件或充满文件的文件夹。
*   **从版本控制中检出**是一个超级有用的选项，可以让你自动从存储库(例如，在 GitHub 上)下载源代码，并在 Rider 中直接打开解决方案。

当您制定新的解决方案时，Rider 会为您提供选项，让您为自己制定该解决方案中的第一个项目。如您所见，它提供了大量模板选择:

![](../Images/image032.jpg)

图 29

第一个选项是创建一个**空解决方案**——只有当你还在思考你想添加什么样的项目时，这个方案才是真正有用的。它生成一个默认的`.sln`文件，就这样。

**更多模板**选项允许您安装和管理随后可用的其他模板。请注意，这些是*而不是*您的标准 Visual Studio 模板；相反，它们是与的`dotnet new`命令相关的模板。NET 核心。

在这两个选项之后，我们有几个不同的部分与。NET Core，。NET(你的好老土。NET 框架)和 Xamarin。如果您不熟悉可以在。NET 生态系统，这里有一个简短的复习:

*   **类库**制作一个库，一个不可执行但可以在其他库和应用程序中使用的二进制组件。本质上，它是一个可重用的组件。
*   **控制台应用程序**是在操作系统终端窗口内运行的可执行文件。它只能读写文本输出；没有图形。
*   **单元测试项目**是一个包含单元测试的项目。实际上，一个单元测试项目通常也是一个类库(尽管让它成为一个控制台应用程序没有坏处)，由*单元测试运行程序*加载和处理。在我们的例子中，一个单元测试运行者就是 Rider 本身！
*   **ASP.NET web 应用**是一个使用 ASP.NET 基础设施的 Web 应用(一个网站或者仅仅是一个 Web 服务)。直到最近，你还只能在微软自己的互联网信息服务器(IIS)平台上运行 ASP.NET 应用程序，该平台与 Windows 紧密相连。如今，ASP.NET 主机的选择要多得多，包括 Windows Azure(不可否认，它仍然与微软捆绑在一起)以及 Kestrel，这是一个跨平台的 ASP.NET 网络服务器，是免费的，不针对 Windows。
*   **WPF 应用程序**是如果你想做一个有用户界面的普通老式 Windows 应用程序，你会选择的。较旧的技术 Windows Forms 在 Rider 中使用起来要困难得多(它严重依赖于 Rider 没有的视觉设计器)，因此没有模板。
*   **Xamarin** 是一个制作跨平台移动应用的平台，可以通过单一源代码在多种设备(安卓、iOS 甚至 UWP)上运行。当然，用户界面的实现是有区别的，所以 Xamarin 应用程序的典型实现是由一个或多个库中的业务逻辑与两个或多个前端实现相结合组成的。幸运的是，大多数脚手架是自动生成的。

根据您选择的模板，对话框窗口的右侧将显示一些自定义项目的选项。

一旦你写好了你的程序，你就可以从集成开发环境中运行它，如果你的程序是一个控制台应用程序，它也可以在集成开发环境中运行 T2，这要归功于莱德的集成控制台。实际上，这意味着您的命令行输入/输出将被截取并显示在单独的工具窗口中:

![](../Images/image033.jpg)

图 30

| ![](../Images/note.png) | 注意:理解“运行”窗口和“终端”窗口之间的区别很重要。当您执行一个应用程序时，会出现如图 30 所示的窗口。“终端”窗口是一个单独的插件，用于托管本机操作系统终端。 |

如果您的应用程序不是控制台应用程序，那么实际运行该应用程序的结果取决于您使用的应用程序类型。如果您有一个 WPF 应用程序，该应用程序的主窗口将会显示。如果你和 ASP.NET 一起工作，你会看到一个浏览器。如果你启动一个 Xamarin 应用程序，它可以在模拟器中打开(或者在移动设备上)。

为了能够运行或调试任何东西，你需要创建一个合适的*配置*；配置选项可从**运行>编辑配置**的顶部菜单中获得，通常如下所示:

![](../Images/image034.jpg)

图 31

配置定义了与应用程序如何执行相关的所有参数。您可以选择运行哪个版本的项目。NET 框架，运行该应用程序的路径，以及许多其他有用的信息。

Rider 提供了许多不同类型的配置(例如，覆盖不同的 web 框架)，但是主要的配置与。NET 开发人员要么是。NET 可执行文件或各种 Xamarin 模板。就这样。

调试的全部意义在于能够在运行程序的过程中停下来，以便找出问题所在。这是使用*断点—* 特殊标记来完成的，这些标记告诉执行引擎在哪里停止。

您可以通过单击代码左侧的空白区域来添加断点。每个断点都会出现一个红色圆圈:

![](../Images/image035.jpg)

图 32

默认情况下，每当我们进入这一行代码时，都会遇到断点。但是断点可以自定义；如果右键单击断点，您将看到以下内容:

![](../Images/image036.jpg)

图 33

这里有两个复选框: **Enabled** 可以控制调试时断点是否“正在运行”， **Suspend** 确定在这个特定位置执行是否实际挂起。你看，有时候你想让断点去做*而不是*暂停执行的事情，比如写一些东西到日志。

最后一个选项**条件**，允许你只在某些条件成立时触发断点。这个条件可以是任何代码块，但是自然地，它需要评估到一个`bool`才能工作。

如果你点击**更多**链接(或使用键盘快捷键)，会有更多的选项。下面是您将看到的对话框:

![](../Images/image037.jpg)

图 34

这里有很多东西需要消化。除了“已启用”、“挂起”和“条件”设置之外，您还可以记录一条消息来调试输出:要么只是一条表明该文件/行组合已被命中的一般消息，要么是对某个表达式的评估。您还可以通过指定您准备执行此操作的命中次数来控制这种情况发生的时间跨度。

一旦命中，有一个选项可以完全删除断点，最后，您可以禁用该断点，直到其他一些*断点命中，并确定在断点命中后会发生什么*。**

 *在左侧，您可以看到一个列表，其中列出了您自己的所有断点以及与异常中断相关的设置(当前支持。NET 和 JavaScript)。

命中断点会发生什么？程序执行暂停，您将看到一个调试工具窗口:

![](../Images/image038.jpg)

图 35

命中断点后，我们可以在左边看到堆栈框架，在右边看到可供检查的变量。最左边的按钮允许您停止和继续调试过程，而顶部的工具栏有几个按钮(蓝色箭头)用于单步执行当前正在执行的代码。

一个有趣的调试特性是**求值表达式** ( **Alt+F8** )。这使您可以键入并评估您可能感兴趣的任何表达式，并立即在单独的弹出窗口中获得结果:

![](../Images/image039.jpg)

图 36

单个变量和评估结果可以添加到一个名为**watchers**的单独选项卡中:该选项卡帮助您在程序执行时跟踪您需要的值:

![](../Images/image040.jpg)

图 37

Rider 有一个内置的单元测试运行器，为 n unit、MSTest 和 xUnit 框架提供支持，并通过插件支持额外的测试框架。对单元测试的支持存在于许多地方，但是最重要的两个是代码编辑器本身和测试运行器。

当使用测试夹具、测试或其他相关属性时，Rider 用可以用鼠标点击或用 **Alt+Enter** 暴露的檐槽图标来装饰代码，以提供与测试相关的选项:

![](../Images/image041.jpg)

图 38

前两个选项是不言而喻的:您可以运行测试或者调试测试。不同的是，在调试会话中，所有受影响的断点都会被触发，这让您可以完成一个棘手的测试，并找出问题所在。所有测试都被添加到一个*测试会话*中，由一个单独的工具窗口窗格表示，该窗格显示一个或多个正在执行的测试。

![](../Images/image042.jpg)

图 39

在图 39 的截图中，我只是让 Rider 索引并执行解决方案中的所有测试。这是最常见的操作之一。您可以使用自己选择的测试定义会话，然后在会话中单独或集体运行测试。

典型测试中显示的选项集可以变得更加复杂。例如，如果您有参数化的单元测试，您可以运行测试的所有用例，或者单独运行/调试每个用例:

![](../Images/image043.jpg)

图 40

Rider 还有一个单独的单元测试快速列表，可从顶部菜单**测试>单元测试快速列表**或通过键盘快捷键( **Alt+Shift+U** 在 VS 布局中)获得:

![](../Images/image044.jpg)

图 41

这个列表中的最后一个选项是单元测试的(相当复杂的)设置组，分为通用设置，以及特定于不同单元测试框架的设置(如 NUnit、MSTest、xUnit 和 Javascript [QUnit/Jasmine])。

NuGet 实际上已经成为微软生态系统中的标准包管理器——不仅仅是针对。NET 项目(这是给定的)，但也适用于基于 web 的项目，甚至 C++。使用第三方 NuGet 包已经成为常态，所以 Rider 有自己的实现也就不足为奇了:

![](../Images/image045.jpg)

图 42

如图 42 所示，NuGet 工具窗口有四个不同的选项卡:

*   **软件包**为您提供了当前安装的软件包列表，以及安装新软件包的能力，以及为您的解决方案中的不同项目升级/降级/删除它们的能力。
*   **源**允许您添加和删除包源。
*   **缓存**允许您控制 NuGet 缓存的位置，并允许您指定是否要自动清除这些缓存。
*   **日志**显示 NuGet 操作的只读日志。

请注意，Rider 不会像 Visual Studio 那样为您提供包管理器控制台。如果你需要一个，你需要自己生一个。*